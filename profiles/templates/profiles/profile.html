{% extends 'home/base.html' %}
{% load custom_filters %}

{% block content %}
	<div class="profile">
		<div class="header">
			<div class="title">
				<a class="btn" href="javascript:history.go(-1)">
					<span class="material-symbols-outlined">arrow_back_ios</span>
					<span>Back</span>
				</a>

				<h2>{{ profile.f_name }}'s Profile</h2>
			</div>

			<div class="actions">
				<a class="btn" href="{% url 'profile-update' profile.p_type profile.pk %}?prev={{request.path}}">
					<span class="material-symbols-outlined">edit</span>
					<span>Edit Profile</span>
				</a>
			
				{% if profile.archivepersonnel %}
					<a class="btn" href="{% url 'archive-remove' profile.p_type profile.archivepersonnel.pk %}?prev={{request.path}}">
						<span class="material-symbols-outlined">unarchive</span>
						<span>Unarchive</span>
					</a>
				{% elif profile.archiveinmate %}
					<a class="btn" href="{% url 'archive-remove' profile.p_type profile.archiveinmate.pk %}?prev={{request.path}}">
						<span class="material-symbols-outlined">unarchive</span>
						<span>Unarchive</span>
					</a>
				{% else %}
					<a class="btn" href="{% url 'archive-add' profile.p_type profile.pk %}?prev={{request.path}}">
						<span class="material-symbols-outlined">archive</span>
						<span>Add to archive</span>
					</a>
				{% endif %}

				
				<div class="dropdown">
					<button class="btn"><span class="material-symbols-outlined">more_vert</span></button>
					<div class="content">
						<a class="btn" href="{% url 'profile-docx-download' profile.p_type profile.pk %}">
							<span class="material-symbols-outlined">download</span>
							<span>Download (.docx)</span>
						</a>
						<a class="btn" href="{% url 'profile-delete' profile.p_type profile.pk %}">
							<span class="material-symbols-outlined">delete</span>
							<span>Delete</span>
						</a>
					</div>
				</div>
			</div>
		</div>

		<div class="info">
			<div class="picture">
				<img src="{{ profile.thumbnail.url }}" alt="thumbnail">
			</div>
			
			<div class="details">
					<div>Name: {{ profile|full_name}}</div>
					<div>Age: {{ profile.age}}</div>
					<div>Address: {{ profile.address}} </div>
					<div>Civil Status: {{ profile.civil_status }}</div>
					<div>Date Profiled: {{ profile.date_profiled|date:"M d, Y H:i a" }}</div>
					{% if profile.p_type == 'personnel' %}
					<div>Rank: {{ profile.rank|upper }}</div>
					<div>Date Assigned: {{ profile.date_assigned|date:"M d, Y H:i a" }}</div>
					<div>Date relieved: {{ profile.date_relieved|date:"M d, Y H:i" }}</div>
					<div>Designation: {{ profile.designation }}</div>
				{% else %}
					<div>Date Arrested: {{ profile.date_arrested|date:"M d, Y H:i a" }}</div>
					<div>Date Arrested: {{ profile.date_committed|date:"M d, Y H:i a" }}</div>
					<div>Date assigned: {{ profile.crime_violated }}</div>
				{% endif %}
			</div>
		</div>
	</div>
{% endblock content %}