{% extends 'app/base_headered.html' %}

{% block content %}
    <form class="profile" method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="header personnel">
			<a class="btn btn-outline-light" href="javascript:history.go(-1)">
				<span class="material-symbols-outlined">arrow_back_ios</span>
				<span>Back</span>
			</a>
            
            <h2 class="title">Settings</h2>
            
            <div class="buttons">
                <button type="submit" class="btn btn-light">
                    <span class="material-symbols-outlined">Save</span>
                    Save Changes
                </button>
            </div>
        </div>

        <div class="body settings">
            <div class="settings-section">
                <div class="settings-header">
                    <h3>Pagination</h3>
                </div>

                <div class="settings-block">
                    <div>
                        {% if form.profiles_per_page.errors %}
                            <div class="alert alert-danger">
                                {% for error in form.profiles_per_page.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}

                        <div class="settings-item">
                            {{ form.profiles_per_page.label_tag }}
                            {{ form.profiles_per_page }}
        
                            <small>The number of profiles to be shown per page. The larger the amount will decrease the performance of the website.</small>
                        </div>
                    </div>

                    <div>
                        {% if form.thumbnail_size.errors %}
                            <div class="alert alert-danger">
                                {% for error in form.thumbnail_size.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}

                        <div class="settings-item">
                            {{ form.thumbnail_size.label_tag }}
                            {{ form.thumbnail_size }}
        
                            <small>Determines how small or big the thumbnail resolution will be. The smaller the thumbnail size will increase the performance of the website however makes the profile images look very pixelated.</small>
                        </div>
                    </div>
                </div>
            </div>



            <div class="settings-section">
                <div class="settings-header">
                    <h3>Camera and Cropping</h3>
                </div>

                <div class="settings-block">
                    <div>
                        {% if form.camera.errors %}
                            <div class="alert alert-danger">
                                {% for error in form.camera.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}

                        <div class="settings-item">
                            {{ form.camera.label_tag }}
                            {{ form.camera }}

                            <small>The default camera is determined by your device's camera setup, usually starting with the primary camera (0).</small>
                        </div>
                    </div>

                    <div>
                        {% if form.clip_camera.errors %}
                            <div class="alert alert-danger">
                                {% for error in form.clip_camera.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}

                        <div class="settings-item">
                            {{ form.clip_camera.label_tag }}
                            {{ form.clip_camera }}

                            <small>Whether to crop the camera or not. Used with the default_crop_size for saving.</small>
                        </div>
                    </div>

                    <div>
                        {% if form.clip_size.errors %}
                            <div class="alert alert-danger">
                                {% for error in form.clip_size.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}

                        <div class="settings-item">
                            {{ form.clip_size.label_tag }}
                            {{ form.clip_size }}

                            <small>The size of the the camera. May not work if values are too large or small and may depend on the webcam's resolution.</small>
                        </div>
                    </div>
                </div>
            </div>
            


            <div class="settings-section">
                <div class="settings-header">
                    <h3>Search</h3>
                </div>

                <div class="settings-block">
                    <div>
                        {% if form.threshold.errors %}
                            <div class="alert alert-danger">
                                {% for error in form.threshold.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}

                        <div class="settings-item">
                            {{ form.threshold.label_tag }}
                            {{ form.threshold }}
                        
                            <small>The threshold is used to compare input images with stored ones. The smaller the threshold will see less profile as not match.</small>
                        </div>
                    </div>

                    <div>
                        {% if form.search_mode.errors %}
                            <div class="alert alert-danger">
                                {% for error in form.search_mode.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}

                        <div class="settings-item">
                            {{ form.search_mode.label_tag }}
                            {{ form.search_mode }}

                            <small>Embedding is the simplified version of an image which makes recognition faster, unlike using raw images that need more processing. Embedding is generated once any profile image is saved.</small>
                        </div>
                    </div>
                </div>
            </div>
            
            
            
            <div class="settings-section">
                <div class="settings-header">
                    <h3>Templates</h3>
                    <p>The [[placeholder]] must stay accurate so the system places data correctly. Users can fix content (like typos) but canâ€™t alter the layout (mainly the table), ensuring the template structure remains intact. You can download the template by clicking the link beside the input field.</p>
                </div>

                <div class="settings-block">
                    <div>
                        {% if form.template_personnel.errors %}
                            <div class="alert alert-danger">
                                {% for error in form.template_personnel.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}

                        <div class="settings-item">
                            <label for="{{ form.template_personnel.id_for_label }}">Personnel</label>
                            {{ form.template_personnel }}

                            {% if defset.template_personnel %}
                                <span>Current: <a class="link" href="{{ defset.template_personnel.url }}" target="_blank">{{ defset.template_personnel.name }}</a></span>
                            {% endif %}
                        </div>
                    </div>
                    
                    <div>
                        {% if form.template_inmate.errors %}
                            <div class="alert alert-danger">
                                {% for error in form.template_inmate.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}

                        <div class="settings-item">
                            <label for="{{ form.template_inmate.id_for_label }}">Inmate</label>
                            {{ form.template_inmate }}

                            {% if defset.template_inmate %}
                                <span>Current: <a class="link" href="{{ defset.template_inmate.url }}" target="_blank">{{ defset.template_inmate.name }}</a></span>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            
            
            
            <div class="settings-section">
                <div class="settings-header">
                    <h3>Model</h3>
                    <p>The AI Model used to recognize individuals.</p>
                </div>

                <div class="settings-block">
                    {% if form.model.errors %}
                        <div class="alert alert-danger">
                            {% for error in form.model.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}

                    <div class="settings-item">
                        {{ form.model.label_tag }}
                        {{ form.model }}

                        {% if defset.model %}
                            <span>Current: <a class="link" href="{{ defset.model.url }}" target="_blank">{{ defset.model.url }}</a> </span>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </form>
{% endblock content %}
